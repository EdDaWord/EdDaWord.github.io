<!DOCTYPE html>
<html>
    <head>
        <title>IVS demo</title>
        <script src="https://player.live-video.net/1.16.0/amazon-ivs-player.min.js"></script>
    </head>
    <body style="margin:0;">
        <video style="width:100%; top: 280px; position: absolute; z-index: 1;" id="video-player" controls playsinline></video>
        <img style="width: 50%;  top: 47%; left: 25%; position: absolute; z-index: 1" src="./assets/images/nothingforever.png">
        <img style="width: 100%; z-index: -1" src="./assets/images/hbo-small.png">
    </body>
    <script>
      if (IVSPlayer.isPlayerSupported) {
        // This shows how to include the Amazon IVS Player with a script tag from our CDN
        // If self hosting, you may not be able to use the create() method since it requires
        // that file names do not change and are all hosted from the same directory.

        (function (IVSPlayerPackage) {
            // First, check if the browser supports the IVS player.
            if (!IVSPlayerPackage.isPlayerSupported) {
                console.warn("The current browser does not support the IVS player.");
                return;
            }

            const PlayerState = IVSPlayerPackage.PlayerState;
            const PlayerEventType = IVSPlayerPackage.PlayerEventType;

            // Initialize player
            const player = IVSPlayerPackage.create();
            console.log("IVS Player version:", player.getVersion());
            player.attachHTMLVideoElement(document.getElementById("video-player"));

            // Attach event listeners
            player.addEventListener(PlayerState.PLAYING, function () {
                console.log("Player State - PLAYING");
            });
            player.addEventListener(PlayerState.ENDED, function () {
                console.log("Player State - ENDED");
            });
            player.addEventListener(PlayerState.READY, function () {
                console.log("Player State - READY");
            });
            player.addEventListener(PlayerEventType.ERROR, function (err) {
                console.warn("Player Event - ERROR:", err);
            });
            player.addEventListener(PlayerEventType.TEXT_METADATA_CUE, (cue) => {
                const metadataText = cue.text;
                const position = player.getPosition().toFixed(2);
                console.log(
                    `PlayerEvent - TEXT_METADATA_CUE: "${metadataText}". Observed ${position}s after playback started.`
                );
            });

            // Setup stream and play
            player.setAutoplay(true);
            player.load(
                "https://production.assets.clips.twitchcdn.net/eqCyFUrUuTh49p_pxgFcuQ/AT-cm%7CeqCyFUrUuTh49p_pxgFcuQ.mp4?token=%7B%22authorization%22%3A%7B%22forbidden%22%3Afalse%2C%22reason%22%3A%22%22%7D%2C%22clip_uri%22%3A%22https%3A%2F%2Fproduction.assets.clips.twitchcdn.net%2FeqCyFUrUuTh49p_pxgFcuQ%2FAT-cm%257CeqCyFUrUuTh49p_pxgFcuQ.mp4%22%2C%22device_id%22%3A%22VLA3HwaFfRSDx7aEPeki09zOX3mGQwDv%22%2C%22expires%22%3A1675699301%2C%22user_id%22%3A%22%22%2C%22version%22%3A2%7D&sig=3dd0b4f0b04cf6af1fd4670047e5d999cf672f4d"
            );
            player.setVolume(0.5);
        })(window.IVSPlayer);

      }
    </script>
</html>